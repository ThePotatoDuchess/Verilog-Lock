//MODULE 1
module checker(clock, password, guess, display, s0,s1,s2,s3,s4,s5);

	input clock; 
	input [5:0] password;
	input [5:0] guess;
	reg startDisp; 
	output [6:0] s0,s1,s2,s3,s4,s5; 
	output reg [1:0] display;
	reg [1:0] attempts = 0;
	
	//display =1 -> guessed correct
	//display =2 -> incorrect
	//display = 3 -> lockout 
	
	always @(posedge clock)
		begin
		
			if (password == guess)
				begin
					display <= 1; //guessed it correct
					startDisp <= 1; //This enables the display for getting the answer correct
					attempts <=0; 
				end
			else
				begin
// I had it like this but I was told that the if statement will compare the old value instead of the updated value so i added  a new part just in case
				
//					attempts <= attempts +1; 
//								
//					if(attempts == 3)
//						display <= 3; //locked
//					else
//						display <= 2; //attempted but incorrect
//						startDisp <= 1; //This enables the display for getting the answer correct

					if(attempts == 2) 
						begin
							attempts <= 3; 
							display <= 3; 
							startDisp<= 0 ;
						end
					else
						begin
							attempts <= attempts +1; 
							display <= 2; 
							startDisp <= 1; 
						end
				end
		end 
		
		hexDisplayChecker disp(startDisp,clock,display,s0,s1,s2,s3,s4,s5);
		
endmodule 

//MODULE 2			
module hexDisplayChecker(startDisp,checkClk,dispValue, s0,s1,s2,s3,s4,s5);


input startDisp; //This is the signal to start the 1sec message 
input checkClk; 
input [1:0] dispValue;

output reg [6:0] s0,s1,s2,s3,s4,s5; 

reg [31:0] counter = 0; 
reg [1:0] savedDisp; //stores temp value and determines which display to show it guarantees that it will flash for 1 sec
reg showDisp = 0; //This will be assigned to 1 when dhowing yipee or false


//1 SEC TIMING
always @(posedge checkClk) 
	begin
		if(startDisp) 
			begin
				showDisp <= 1;
				savedDisp <= dispValue; 
				counter <= 50000000; // 50MHz for 1 sec
			end
		else if(showDisp)
					begin
						if (counter > 0)
							counter <=counter -1; 
						else
							showDisp <= 0; //time has ended it will return to the default display
					end
	end 
		

//THE DISPLAY PART FOR THE CHECKER 
	always @(*)
		begin 
			if(showDisp) 
				begin
					case(savedDisp)
						2'b01: 
							begin
							s0 = 7'b1111111; // blank
							s1 = 7'b1001100; //Y
							s2 = 7'b1111001; // I
							s3 = 7'b0011000; //P
							s4 = 7'b0110000; //E
							s5 = 7'b0110000; //E
							end 
						
						2'b10: 
							begin 
						
							s0 = 7'b1111111; // blank
							s1 = 7'b0111000; // F
							s2 = 7'b0001000; // A
							s3 = 7'b1110001; // L
							s4 = 7'b0100100; //S
							s5 = 7'b0110000; //E
							
							end
					endcase 
				end
			else if(savedDisp == 3)
						begin
						//goes to the lockout module 
						end
			else 
			begin
			//The default the guessing password module
			end
			
		end
endmodule 